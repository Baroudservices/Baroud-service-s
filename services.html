<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Baroud Services</title>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <style>
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:linear-gradient(180deg,#0b1220,#050914);
      color:#fff;
      min-height:100vh;
      padding:16px;
    }
    .top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:16px;
    }
    .icon{
      width:44px;height:44px;border-radius:16px;
      background:rgba(255,255,255,.08);
      display:flex;align-items:center;justify-content:center;
      font-size:20px;cursor:pointer;user-select:none;
    }
    h1{margin:6px 0 18px;text-align:center;font-size:28px}
    .card{
      max-width:520px;margin:0 auto;
      background:rgba(255,255,255,.06);
      border-radius:22px;padding:18px;
    }
    .item{
      width:100%;
      padding:16px;
      margin-top:12px;
      border:none;
      border-radius:16px;
      font-size:16px;
      background:rgba(255,255,255,.10);
      color:#fff;
      cursor:pointer;
    }
    .footer{
      text-align:center;
      color:#8ea0c4;
      margin-top:18px;
      font-size:13px;
      opacity:.9;
    }
  </style>
</head>

<body>

  <div class="top">
    <div class="icon" onclick="logout()">⎋</div>
    <div class="icon" onclick="go('add-credit.html')">➕</div>
  </div>

  <h1>Baroud Services</h1>

  <div class="card">
    <button class="item" onclick="openWhats()">WhatsApp</button>
    <button class="item" onclick="alert('Service 1')">Service 1</button>
    <button class="item" onclick="alert('Service 2')">Service 2</button>
    <button class="item" onclick="go('add-credit.html')">Add Credit</button>
    <button class="item" onclick="logout()">Logout</button>
  </div>

  <div class="footer">Ready ✅</div>

<script>
  // ✅ BASE ديناميكي: نفس الدومين + نفس اسم الريبو + نفس الفولدر
  function getBase(){
    // مثال pathname: /Baroud-service-s/services.html
    const parts = window.location.pathname.split("/").filter(Boolean);
    const repo = parts.length ? parts[0] : "";
    return window.location.origin + (repo ? ("/" + repo + "/") : "/");
  }

  function go(page){
    const url = getBase() + page + "?v=" + Date.now();
    window.location.replace(url);
  }

  function openWhats(){
    window.open("https://wa.me/96170385398","_blank");
  }

  const supabase = window.supabase.createClient(
    "https://pqrwitolonhfbfwtsnde.supabase.co",
    "sb_publishable_l5PtPu6xVyWq2pD6jzEYRw_CYEQ9-f_"
  );

  async function logout(){
    await supabase.auth.signOut();
    go("index.html");
  }

  async function guard(){
    const { data } = await supabase.auth.getSession();
    if(!data.session){
      go("index.html");
    }
  }

  guard();
</script>

</body>
</html>
